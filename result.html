<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî –ú–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–ª–∞–Ω</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */
        :root {
            --primary-color: #10b981;
            --primary-light: #34d399;
            --secondary-color: #0ea5e9;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-light: #94a3b8;
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 1rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            /* –°—Ç–∏–ª–∏ –¥–ª—è body —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –≤ style.css */
        }

        .calculator {
            background: var(--bg-secondary);
            padding: 2.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: var(--text-primary);
            font-size: 2.25rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2.5rem;
            position: relative;
            display: none;
        }

        h2 {
            color: rgb(13, 63, 74);
            margin-bottom: 2.2rem;
        }

        .sections-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2.5rem;
        }

        .section {
            background: rgba(5, 173, 115, 0.08);
            padding: 2rem;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
        }

        .input-group {
            margin-bottom: 2.2rem;
            margin-top: 1.5rem;
        }

        .input-description {
            font-size: 0.92rem;
            color: var(--text-light);
            margin-top: 0.2rem;
            line-height: 1.4;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: rgb(13, 63, 74);
            font-weight: 500;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            text-align: right;
            font-family: 'Roboto Mono', monospace;
            transition: all 0.2s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        button {
            width: 100%;
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background: var(--primary-light);
        }

        .results {
            margin-top: 3rem;
            background: rgba(5, 173, 115, 0.08);
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .result-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .result-item {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            height: auto;
        }

        .result-header {
            display: block;
            margin-bottom: 1rem;
        }

        .result-label {
            font-weight: 600;
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.5rem;
        }

        .result-value {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.25rem;
            font-family: 'Roboto Mono', monospace;
        }

        .present-value-note {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .chart-container {
            position: relative;
            height: 400px;
            width: 115%;
            max-width: 100%;
            margin-top: 2rem;
            background: white;
            padding: 0;
            border-radius: 0;
            box-shadow: none;
        }

        .result-value-container {
            margin-bottom: 0.75rem;
        }

        .result-explanation {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
            margin-top: 0.5rem;
            border-top: 1px solid #e2e8f0;
            padding-top: 0.5rem;
        }

        .recommendations {
            margin-top: 3rem;
            background: rgba(14, 165, 233, 0.08);
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .recommendation-content {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .recommendation-item {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            height: auto;
        }
        
        .recommendation-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.8rem;
            font-size: 1rem;
            display: block;
        }

        .recommendation-text {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.875rem;
        }

        .back-btn-container {
            margin-top: 3rem;
            padding: 2rem;
            background: rgba(20, 184, 166, 0.08);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .dropdown-menu a {
            text-align: left;
        }

        @media (max-width: 1024px) {
            body {
                /* –°—Ç–∏–ª–∏ –¥–ª—è body —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –≤ style.css */
            }

            .calculator {
                padding: 1.5rem;
            }

            .sections-container {
                grid-template-columns: 1fr;
            }

            .result-section {
                grid-template-columns: 1fr;
            }

            .recommendation-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.3rem;
            }
            h2 {
                font-size: 1.05rem;
            }
            label {
                font-size: 0.98rem;
            }
            .input-description {
                font-size: 0.85rem;
            }
            input[type="text"],
            input[type="number"],
            select {
                font-size: 0.98rem;
                padding: 0.6rem 0.7rem;
            }
            .calculator {
                padding: 0.7rem;
            }
            .section {
                padding: 1rem;
            }
            .results {
                padding: 1rem;
                margin-top: 1.5rem;
            }
            .recommendations {
                padding: 1rem;
                margin-top: 1.5rem;
            }
            .back-btn-container {
                padding: 1rem;
                margin-top: 1.5rem;
            }
            .result-item, 
            .recommendation-item {
                padding: 1rem;
            }
            .result-section,
            .recommendation-content {
                gap: 1rem;
            }
            .result-label,
            .recommendation-title {
                font-size: 0.92rem;
                margin-bottom: 0.4rem;
            }
            .result-value,
            .recommendation-text {
                font-size: 0.85rem;
            }
            .input-group {
                margin-bottom: 1.1rem;
            }
            button {
                padding: 0.7rem;
                font-size: 0.98rem;
            }
            .chart-scenario-block {
                padding: 0.35rem 0.35rem 0.25rem 0.35rem;
            }
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            margin-right: 0.5rem;
        }

        .checkbox-container label {
            margin: 0;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        input:disabled {
            background-color: #f1f5f9;
            cursor: not-allowed;
        }

        .overview-title {
            font-size: 34px;
            font-weight: 500;
            height: 51px;
            line-height: 51px;
            margin-bottom: 16px;
            color: rgb(13, 63, 74);
            text-align: left;
        }
        .chart-scenario-block {
            background: var(--bg-secondary);
            border: 1.5px solid #e2e8f0;
            border-radius: 0;
            margin-top: 1rem;
            margin-bottom: 2.5rem;
            padding: 1rem 1rem 0.75rem 1rem;
        }
    </style>
</head>
<body>
    <div class="mobile-header">
        <button class="menu-btn" aria-label="–ú–µ–Ω—é" onclick="toggleMenu()">
            <span class="menu-icon"></span>
        </button>
        <img src="img/bird_logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" />
        <span class="header-title">–ü–µ–Ω—Å–∏–æ–Ω–Ω—ã–π –ø–ª–∞–Ω</span>
        <div class="dropdown-menu" id="dropdownMenu">
            <a href="index.html">–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö</a>
            <a href="result.html">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</a>
        </div>
    </div>
    <div class="calculator">
        <div class="overview-title">–û–±–∑–æ—Ä</div>
        <div class="chart-scenario-block">
            <div class="gauge-info-block" style="margin-bottom: 1rem;">
                <div class="gauge-title" style="font-size: 1.25rem; font-weight: 600; color: rgb(13, 63, 74); margin-bottom: 0.3rem;">–®–∞–Ω—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏</div>
                <div class="gauge-desc" style="font-size: 1rem; color: #475569;">–£ –≤–∞—Å –ø–æ–ª—É—á–∏—Ç—Å—è –ø—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—é –ø–µ–Ω—Å–∏—é —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.</div>
            </div>
            <div class="chart-container">
                <canvas id="chart"></canvas>
            </div>
            <div class="input-group">
                <label for="scenario">–°—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–∑–≤–∏—Ç–∏—è:</label>
                <select id="scenario">
                    <option value="optimistic">–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π</option>
                    <option value="moderate" selected>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π</option>
                    <option value="pessimistic">–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π</option>
                </select>
                <div class="input-description" id="scenario-desc"></div>
            </div>
        </div>
        <div class="results">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
            <div class="result-section">
                <div class="result-item">
                    <span class="result-label">–ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Å—É–º–º–∞ –∫ –ø–µ–Ω—Å–∏–∏:</span>
                    <div id="required-amount">-</div>
                </div>
                <div class="result-item">
                    <span class="result-label">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∫ –ø–µ–Ω—Å–∏–∏:</span>
                    <div id="projected-amount">-</div>
                </div>
                <div class="result-item">
                    <span class="result-label">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏:</span>
                    <div id="recommended-savings">-</div>
                </div>
                <div class="result-item">
                    <span class="result-label">–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç/–ø—Ä–æ—Ñ–∏—Ü–∏—Ç:</span>
                    <div id="monthly-gap">-</div>
                </div>
            </div>
        </div>

        <div class="recommendations">
            <h2>üí° –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
            <div class="recommendation-content" id="recommendations-container">
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π...</p>
            </div>
        </div>
        
        <div class="back-btn-container">
            <button class="back-btn" onclick="goBack()">–ù–∞–∑–∞–¥ –∫ –≤–≤–æ–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</button>
        </div>
    </div>
    <script>
        const SCENARIOS = {
            optimistic: { name: '–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π', returnRate: 0.15, inflationRate: 0.07 },
            moderate:   { name: '–°—Ä–µ–¥–Ω–∏–π', returnRate: 0.135, inflationRate: 0.08 },
            pessimistic:{ name: '–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π', returnRate: 0.08, inflationRate: 0.10 }
        };
        const RETIREMENT_RETURN = 0.07;
        function getNumberFromFormattedString(str) {
            if (str == null || str === '') return 0;
            if (typeof str === 'number') return str;
            return parseInt(str.toString().replace(/\D/g, '')) || 0;
        }
        function formatCurrency(amount) {
            return new Intl.NumberFormat('ru-RU', {
                style: 'currency',
                currency: 'RUB',
                maximumFractionDigits: 0
            }).format(amount);
        }
        function formatCurrencyShort(value) {
            if (value === 0) return '0 ‚ÇΩ';
            const absValue = Math.abs(value);
            const isMobile = window.innerWidth <= 600;
            if (absValue >= 1000000000) {
                return (value / 1000000000).toFixed(1).replace(/\.0$/, '') + (isMobile ? ' –º–ª—Ä–¥' : ' –º–ª—Ä–¥ ‚ÇΩ');
            }
            if (absValue >= 1000000) {
                return (value / 1000000).toFixed(1).replace(/\.0$/, '') + (isMobile ? ' –º–ª–Ω' : ' –º–ª–Ω ‚ÇΩ');
            }
            if (absValue >= 1000) {
                return (value / 1000).toFixed(0) + (isMobile ? ' —Ç—ã—Å.' : ' —Ç—ã—Å. ‚ÇΩ');
            }
            return value.toFixed(0) + (isMobile ? '' : ' ‚ÇΩ');
        }
        function pluralizeYears(years) {
            if (years % 10 === 1 && years % 100 !== 11) return '–≥–æ–¥';
            if ([2,3,4].includes(years % 10) && ![12,13,14].includes(years % 100)) return '–≥–æ–¥–∞';
            return '–ª–µ—Ç';
        }
        function goBack() {
            window.location.href = 'index.html';
        }
        function calculateFinancialPlan() {
            const savedData = localStorage.getItem('financialPlannerData');
            if (!savedData) return;
            const data = JSON.parse(savedData);
            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
            const scenario = document.getElementById('scenario').value;
            // ---
            const scenarioObj = SCENARIOS[scenario];
            // ---
            const age = parseInt(data.age) || 0;
            const retirementAge = parseInt(data.retirementAge) || 0;
            const currentSavings = getNumberFromFormattedString(data.currentSavings);
            const monthlySavings = getNumberFromFormattedString(data.monthlySavings);
            const desiredRetirementIncome = getNumberFromFormattedString(data.desiredRetirementIncome);
            const lifeExpectancy = parseInt(data.lifeExpectancy) || 80;
            const returnRate = scenarioObj.returnRate;
            const inflationRate = scenarioObj.inflationRate;
            const yearsToRetirement = retirementAge - age;
            const yearsInRetirement = lifeExpectancy - retirementAge;
            // ---
            function calculateRequiredAmount() {
                const inflationAdjustedIncome = desiredRetirementIncome * Math.pow(1 + inflationRate, yearsToRetirement);
                const realReturn = (1 + RETIREMENT_RETURN) / (1 + inflationRate) - 1;
                if (Math.abs(realReturn) < 0.0001) {
                    return inflationAdjustedIncome * 12 * yearsInRetirement;
                } else {
                    return (inflationAdjustedIncome * 12) * (1 - Math.pow(1 + realReturn, -yearsInRetirement)) / realReturn;
                }
            }
            function calculateProjectedAmounts() {
                const labels = [];
                const projectedData = [];
                const requiredData = [];
                const contributionsData = [];
                let currentAmount = currentSavings;
                const monthlyReturn = Math.pow(1 + returnRate, 1/12) - 1;
                const retirementMonthlyReturn = Math.pow(1 + RETIREMENT_RETURN, 1/12) - 1;
                let indexedMonthlySavings = monthlySavings;

                // –≠—Ç–∞–ø –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è
                for (let year = 0; year <= yearsToRetirement; year++) {
                    labels.push(`–ì–æ–¥ ${year}`);
                    projectedData.push(Math.max(0, currentAmount));
                    // –¶–µ–ª–µ–≤–∞—è –ª–∏–Ω–∏—è
                    const requiredAmount = calculateRequiredAmount();
                    requiredData.push(requiredAmount * (year / yearsToRetirement));
                    contributionsData.push(indexedMonthlySavings * 12);
                    for (let month = 0; month < 12; month++) {
                        currentAmount = (currentAmount + indexedMonthlySavings) * (1 + monthlyReturn);
                    }
                    indexedMonthlySavings *= (1 + inflationRate);
                }
                const retirementAmount = currentAmount;

                // –≠—Ç–∞–ø –ø–µ–Ω—Å–∏–∏ (—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏–µ)
                let targetAmount = calculateRequiredAmount();
                let monthlySpending = desiredRetirementIncome * Math.pow(1 + inflationRate, yearsToRetirement);
                for (let year = 1; year <= yearsInRetirement; year++) {
                    labels.push(`–ü–µ–Ω—Å–∏—è ${year}`);
                    for (let month = 0; month < 12; month++) {
                        currentAmount = (currentAmount - monthlySpending) * (1 + retirementMonthlyReturn);
                        targetAmount = (targetAmount - monthlySpending) * (1 + retirementMonthlyReturn);
                    }
                    projectedData.push(Math.max(0, currentAmount));
                    requiredData.push(Math.max(0, targetAmount));
                    contributionsData.push(0); // –ù–∞ –ø–µ–Ω—Å–∏–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π –Ω–µ—Ç
                    monthlySpending *= (1 + inflationRate);
                }
                return { labels, projectedData, requiredData, contributionsData, retirementAmount };
            }
            function calculateRecommendedSavings(requiredAmount, yearsToRetirement) {
                // –°—á–∏—Ç–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (—Å —É—á—ë—Ç–æ–º –∏–Ω—Ñ–ª—è—Ü–∏–∏)
                const realReturn = (1 + returnRate) / (1 + inflationRate) - 1;
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ü–µ–ª–µ–≤–æ–π —Å—É–º–º—ã (–≤ —Ç–µ–∫—É—â–∏—Ö –¥–µ–Ω—å–≥–∞—Ö)
                const realRequiredAmount = requiredAmount / Math.pow(1 + inflationRate, yearsToRetirement);
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–µ—Å—è—á–Ω—É—é —Ä–µ–∞–ª—å–Ω—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
                const realMonthlyReturn = Math.pow(1 + realReturn, 1/12) - 1;
                const monthsToRetirement = yearsToRetirement * 12;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –±—É–¥—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å —Ä–µ–∞–ª—å–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é
                const realFutureValueFactor = Math.pow(1 + realMonthlyReturn, monthsToRetirement);
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –≤–∑–Ω–æ—Å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–µ–ª–∏—á–∏–Ω–∞—Ö
                const realRecommendedSavings = (realRequiredAmount - currentSavings * realFutureValueFactor) / 
                    ((realFutureValueFactor - 1) / realMonthlyReturn);
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–±–µ—Ä–µ–∂–µ–Ω–∏—è (—É–∂–µ –≤ –Ω–æ–º–∏–Ω–∞–ª—å–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)
                return realRecommendedSavings;
            }
            // ---
            const requiredAmount = calculateRequiredAmount();
            const projectionResults = calculateProjectedAmounts();
            const recommendedSavings = calculateRecommendedSavings(requiredAmount, yearsToRetirement);
            // ---
            const presentValueRequired = requiredAmount / Math.pow(1 + inflationRate, yearsToRetirement);
            const presentValueProjected = projectionResults.retirementAmount / Math.pow(1 + inflationRate, yearsToRetirement);
            document.getElementById('required-amount').innerHTML = `
                <div class="result-value-container">
                    <div class="result-value">${formatCurrency(requiredAmount)}</div>
                    <div class="present-value-note">
                        (${formatCurrency(presentValueRequired)} –≤ —Ç–µ–∫—É—â–∏—Ö –¥–µ–Ω—å–≥–∞—Ö)
                    </div>
                </div>
                <div class="result-explanation">
                    –°—É–º–º–∞ –¥–µ–Ω–µ–≥, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫ –º–æ–º–µ–Ω—Ç—É –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é, —á—Ç–æ–±—ã —Ö–≤–∞—Ç–∏–ª–æ –Ω–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π –ø–µ–Ω—Å–∏–∏. –≠—Ç–æ —Ü–µ–ª–µ–≤–æ–π —Ä–∞–∑–º–µ—Ä –≤–∞—à–µ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞ –∫ –Ω–∞—á–∞–ª—É –ø–µ–Ω—Å–∏–∏.
                </div>
            `;
            document.getElementById('projected-amount').innerHTML = `
                <div class="result-value-container">
                    <div class="result-value">${formatCurrency(projectionResults.retirementAmount)}</div>
                    <div class="present-value-note">
                        (${formatCurrency(presentValueProjected)} –≤ —Ç–µ–∫—É—â–∏—Ö –¥–µ–Ω—å–≥–∞—Ö)
                    </div>
                </div>
                <div class="result-explanation">
                    –û–∂–∏–¥–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –≤–∞—à–∏—Ö –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π –∫ –º–æ–º–µ–Ω—Ç—É –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º –ø–ª–∞–Ω–µ. –≠—Ç–æ —Å–∫–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥ –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞–∫–æ–ø–∏—Ç—å –∫ –ø–µ–Ω—Å–∏–∏, –∏—Å—Ö–æ–¥—è –∏–∑ –≤–∞—à–∏—Ö —Ç–µ–∫—É—â–∏—Ö —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π, –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö –æ—Ç—á–∏—Å–ª–µ–Ω–∏–π –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.
                </div>
            `;
            document.getElementById('recommended-savings').innerHTML = `
                <div class="result-value">${formatCurrency(Math.max(0, recommendedSavings))}</div>
                <div class="result-explanation">
                    –†–∞—Å—á–µ—Ç–Ω–∞—è —Å—É–º–º–∞, –∫–æ—Ç–æ—Ä—É—é –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Å—É–º–º—ã –∫ –ø–µ–Ω—Å–∏–∏. –ï—Å–ª–∏ –≤—ã –±—É–¥–µ—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç–æ–ª—å–∫–æ –µ–∂–µ–º–µ—Å—è—á–Ω–æ, –∫ –ø–µ–Ω—Å–∏–∏ –Ω–∞–∫–æ–ø–∏—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å—É–º–º–∞.
                </div>
            `;
            let monthlyGap, gapExplanation;
            if (projectionResults.retirementAmount >= requiredAmount) {
                monthlyGap = monthlySavings - recommendedSavings;
                if (monthlyGap < 0) monthlyGap = 0;
                gapExplanation = '–í–∞—à–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –ø—Ä–µ–≤—ã—à–∞—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—É–º–º—É –∫ –ø–µ–Ω—Å–∏–∏. –í—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!';
            } else {
                monthlyGap = monthlySavings - recommendedSavings;
                gapExplanation = monthlyGap < 0
                    ? '–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç–µ –º–µ–Ω—å—à–µ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç–µ —Ü–µ–ª–∏.'
                    : '–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç–µ –±–æ–ª—å—à–µ, —á–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏.';
            }
            document.getElementById('monthly-gap').innerHTML = `                <div class="result-value">${formatCurrency(monthlyGap)}</div>
                <div class="result-explanation">
                    –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≤–∞—à–∏–º —Ç–µ–∫—É—â–∏–º —Ä–∞–∑–º–µ—Ä–æ–º –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–π —Å—É–º–º–æ–π. ${gapExplanation}
                </div>
            `;
            // --- –ì—Ä–∞—Ñ–∏–∫ ---
            const ctx = document.getElementById('chart').getContext('2d');
            if (window.financialChart) window.financialChart.destroy();
            window.financialChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: projectionResults.labels,
                    datasets: [
                        {
                            label: '–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è',
                            data: projectionResults.projectedData,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: '–¶–µ–ª–µ–≤—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è',
                            data: projectionResults.requiredData,
                            borderColor: '#e53e3e',
                            backgroundColor: 'rgba(229, 62, 62, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label + ': ' + formatCurrencyShort(context.parsed.y);
                                    if (context.datasetIndex === 0) {
                                        const index = context.dataIndex;
                                        const contributionValue = projectionResults.contributionsData[index];
                                        return [label, '–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: ' + formatCurrencyShort(contributionValue)];
                                    }
                                    return label;
                                }
                            }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrencyShort(value);
                                },
                                font: function(context) {
                                    return window.innerWidth <= 600 ? { size: 10 } : { size: 13 };
                                }
                            },
                            grid: {
                                borderDash: [6, 6],
                                color: 'rgba(13,63,74,0.2)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
        document.getElementById('scenario').addEventListener('change', calculateFinancialPlan);
        document.addEventListener('DOMContentLoaded', function() {
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–∑ localStorage
            const savedData = localStorage.getItem('financialPlannerData');
            if (savedData) {
                const data = JSON.parse(savedData);
                if (data.scenario) {
                    document.getElementById('scenario').value = data.scenario;
                }
            }
            calculateFinancialPlan();
            generateRecommendations();
            updateScenarioDesc();
        });

        function toggleMenu() {
            var menu = document.getElementById('dropdownMenu');
            menu.classList.toggle('show');
        }
        // –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
        const scenarioDescriptions = {
            optimistic: '–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π: –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å 15%, –∏–Ω—Ñ–ª—è—Ü–∏—è 7%. –ü–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π —Ä–æ—Å—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –∏ —É–º–µ—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–ª—è—Ü–∏—é.',
            moderate: '–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π: –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å 13.5%, –∏–Ω—Ñ–ª—è—Ü–∏—è 8%. –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.',
            pessimistic: '–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π: –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å 8%, –∏–Ω—Ñ–ª—è—Ü–∏—è 10%. –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å —É—á–µ—Ç–æ–º –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤.',
        };
        function updateScenarioDesc() {
            var sel = document.getElementById('scenario');
            var desc = document.getElementById('scenario-desc');
            desc.textContent = scenarioDescriptions[sel.value];
        }
        document.addEventListener('DOMContentLoaded', function() {
            updateScenarioDesc();
            document.getElementById('scenario').addEventListener('change', updateScenarioDesc);
        });

        function generateRecommendations() {
            const savedData = localStorage.getItem('financialPlannerData');
            if (!savedData) return;
            
            const data = JSON.parse(savedData);
            const scenario = document.getElementById('scenario').value;
            const scenarioObj = SCENARIOS[scenario];
            
            const age = parseInt(data.age) || 0;
            const retirementAge = parseInt(data.retirementAge) || 0;
            const currentSavings = getNumberFromFormattedString(data.currentSavings);
            const monthlySavings = getNumberFromFormattedString(data.monthlySavings);
            const desiredRetirementIncome = getNumberFromFormattedString(data.desiredRetirementIncome);
            const lifeExpectancy = parseInt(data.lifeExpectancy) || 80;
            
            const yearsToRetirement = retirementAge - age;
            const yearsInRetirement = lifeExpectancy - retirementAge;
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Ä–∞—Å—á–µ—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            const requiredAmountElement = document.getElementById('required-amount');
            const projectedAmountElement = document.getElementById('projected-amount');
            const recommendedSavingsElement = document.getElementById('recommended-savings');
            const monthlyGapElement = document.getElementById('monthly-gap');
            
            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ —á–∏—Å–ª–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            const requiredAmountValue = getNumberFromFormattedString(requiredAmountElement.innerText);
            const projectedAmountValue = getNumberFromFormattedString(projectedAmountElement.innerText);
            const recommendedSavingsValue = getNumberFromFormattedString(recommendedSavingsElement.innerText);
            const monthlyGapValue = getNumberFromFormattedString(monthlyGapElement.innerText);
            
            // –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –∏ —Ç–µ–∫—É—â–∏—Ö —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π
            const savingsGapPercent = monthlyGapValue ? (monthlyGapValue / (recommendedSavingsValue + monthlyGapValue)) * 100 : 0;
            
            const recommendations = [];
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–µ—Ñ–∏—Ü–∏—Ç –∏–ª–∏ –ø—Ä–æ—Ñ–∏—Ü–∏—Ç
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç, —Ç–∞–∫ –∏ –æ–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
            const hasInsufficientFunds = projectedAmountValue < requiredAmountValue;
            const hasDeficit = hasInsufficientFunds || monthlyGapValue < 0;
            
            if (hasDeficit) {
                // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–∏ –¥–µ—Ñ–∏—Ü–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤
                recommendations.push({
                    title: 'üí∏ –£–≤–µ–ª–∏—á—å—Ç–µ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏',
                    text: `–ß—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å –∂–µ–ª–∞–µ–º–æ–≥–æ –ø–µ–Ω—Å–∏–æ–Ω–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞ –≤ ${formatCurrency(desiredRetirementIncome)} –≤ –º–µ—Å—è—Ü, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ ${monthlyGapValue < 0 ? `–Ω–∞ ${formatCurrency(Math.abs(monthlyGapValue))}` : ''}. ${hasInsufficientFunds ? '–ü–æ —Ç–µ–∫—É—â–µ–º—É –ø–ª–∞–Ω—É –≤–∞—à–∏—Ö –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π –Ω–µ —Ö–≤–∞—Ç–∏—Ç –¥–ª—è –∂–µ–ª–∞–µ–º–æ–≥–æ –¥–æ—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏–∏.' : ''}`
                });
                
                recommendations.push({
                    title: 'üí∞ –û—Ç–∫—Ä–æ–π—Ç–µ –ò–ò–° (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π —Å—á—ë—Ç)',
                    text: '–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–∞–µ—Ç –Ω–∞–ª–æ–≥–æ–≤—ã–π –≤—ã—á–µ—Ç 13% –Ω–∞ –≤–∑–Ω–æ—Å—ã –¥–æ 400 —Ç—ã—Å. ‚ÇΩ –≤ –≥–æ–¥ (–º–∞–∫—Å–∏–º—É–º 52 —Ç—ã—Å. ‚ÇΩ –≤–æ–∑–≤—Ä–∞—Ç–∞ –µ–∂–µ–≥–æ–¥–Ω–æ). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á–∞—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤–∞–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω–µ—Ç—Å—è –æ—Ç –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞, —á—Ç–æ –ø–æ–≤—ã—Å–∏—Ç –æ–±—â–∏–π —à–∞–Ω—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏.'
                });
                
                recommendations.push({
                    title: 'üìâ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã –∏ –±—é–¥–∂–µ—Ç',
                    text: '–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–µ–∫—É—â–∏–µ —Ç—Ä–∞—Ç—ã: –≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å —Å—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å, –∞ —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏. –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–∏—Å–∫—Ä–µ—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –ø–µ–Ω—Å–∏–æ–Ω–Ω—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–Ω–æ —É–ª—É—á—à–∏—Ç –≤–∞—à–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã.'
                });
                
                // –ï—Å–ª–∏ –±–æ–ª—å—à–æ–π –¥–µ—Ñ–∏—Ü–∏—Ç, –ø—Ä–µ–¥–ª–æ–∂–∏–º –æ—Ç–ª–æ–∂–∏—Ç—å –ø–µ–Ω—Å–∏—é
                if (savingsGapPercent < -20) {
                    recommendations.push({
                        title: '‚è≥ –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω–µ–≥–æ –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é',
                        text: '–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—Ö–æ–¥ –Ω–∞ –ø–µ–Ω—Å–∏—é –Ω–µ –≤ ' + retirementAge + ', –∞ –≤ ' + (retirementAge + 3) + '-' + (retirementAge + 5) + ' –ª–µ—Ç) –ø–æ–∑–≤–æ–ª–∏—Ç –¥–æ–ª—å—à–µ –ø–æ–ø–æ–ª–Ω—è—Ç—å –ø–µ–Ω—Å–∏–æ–Ω–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª –∏ —É–º–µ–Ω—å—à–∏—Ç –ø–µ—Ä–∏–æ–¥, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω—É–∂–Ω—ã –Ω–∞ –ø–µ–Ω—Å–∏–∏.'
                    });
                }
                
                // –ï—Å–ª–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π –¥–µ—Ñ–∏—Ü–∏—Ç, –ø—Ä–µ–¥–ª–æ–∂–∏–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª—å
                if (savingsGapPercent < -40) {
                    recommendations.push({
                        title: 'üéØ –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à—É —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —Ü–µ–ª—å',
                        text: `–¶–µ–ª–µ–≤–æ–π –¥–æ—Ö–æ–¥ ${formatCurrency(desiredRetirementIncome)} –≤ –º–µ—Å—è—Ü –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä—É–¥–Ω–æ–¥–æ—Å—Ç–∏–∂–∏–º –ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ–º–Ω–æ–≥–æ —Å–Ω–∏–∑–∏—Ç—å –∂–µ–ª–∞–µ–º—ã–π –ø–µ–Ω—Å–∏–æ–Ω–Ω—ã–π –¥–æ—Ö–æ–¥ –∏–ª–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–∏–æ–¥ –≤—ã–ø–ª–∞—Ç. –≠—Ç–æ —É–º–µ–Ω—å—à–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—É–º–º—É –∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—é.`
                    });
                }
                
                // –î–ª—è –º–æ–ª–æ–¥—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
                if (age < 40 && yearsToRetirement > 20) {
                    recommendations.push({
                        title: 'üìà –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π',
                        text: '–£—á–∏—Ç—ã–≤–∞—è –≤–∞—à –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç, –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤—ã—à–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏. –û–¥–Ω–∞–∫–æ –≤–∞–∂–Ω–æ —É—á–µ—Å—Ç—å, —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫–∏. –ü—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Å–æ–≤–µ—Ç–Ω–∏–∫–æ–º –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.'
                    });
                }
            } else {
                // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ—Ñ–∏—Ü–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤
                recommendations.push({
                    title: 'üëç –í—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!',
                    text: `–í–∞—à —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω –ø—Ä–µ–≤—ã—à–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞ ${formatCurrency(monthlyGapValue)} –≤ –º–µ—Å—è—Ü ‚Äì –≤—ã –Ω–∞ –ø—É—Ç–∏ –∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é —Ü–µ–ª–∏ —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ —Å –∑–∞–ø–∞—Å–æ–º.`
                });
                
                if (monthlyGapValue > recommendedSavingsValue * 0.2) {
                    recommendations.push({
                        title: 'üèùÔ∏è –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –Ω–∞ –ø–µ–Ω—Å–∏—é',
                        text: `–£ –≤–∞—Å –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–π—Ç–∏ –Ω–∞ –ø–µ–Ω—Å–∏—é —Ä–∞–Ω—å—à–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å—Ä–æ–∫–∞ (${retirementAge} –ª–µ—Ç) –∏–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –∞–º–±–∏—Ü–∏–æ–∑–Ω—É—é —Ü–µ–ª—å –ø–æ –ø–µ–Ω—Å–∏–æ–Ω–Ω–æ–º—É –¥–æ—Ö–æ–¥—É, –ø–æ—Å–∫–æ–ª—å–∫—É –≤–∞—à —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π –æ–ø–µ—Ä–µ–∂–∞–µ—Ç –ø–ª–∞–Ω.`
                    });
                }
                
                if (yearsToRetirement < 10) {
                    recommendations.push({
                        title: 'üîÑ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é',
                        text: '–ü–æ—Å–∫–æ–ª—å–∫—É –≤—ã –±–ª–∏–∑–∫–∏ –∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é —Å–≤–æ–µ–π —Ü–µ–ª–∏, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞ —á–∞—Å—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤ –≤ –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞ –æ—Ç —Ä—ã–Ω–æ—á–Ω—ã—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π.'
                    });
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π
            
            // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ–≥–¥–∞)
            recommendations.push({
                title: 'üìà –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π',
                text: '–†–∞–∑–¥–µ–ª–∏—Ç–µ –≤–∞—à–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ –∞–∫—Ç–∏–≤–æ–≤: –∞–∫—Ü–∏–∏ (60-70%), –æ–±–ª–∏–≥–∞—Ü–∏–∏ (20-30%), –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (5-10%). –≠—Ç–æ —Å–Ω–∏–∑–∏—Ç –æ–±—â–∏–π —Ä–∏—Å–∫ –∏ –ø–æ–≤—ã—Å–∏—Ç —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è –∫ —Ä—ã–Ω–æ—á–Ω—ã–º –∫–æ–ª–µ–±–∞–Ω–∏—è–º. –î–ª—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Å–æ–≤–µ—Ç–Ω–∏–∫–æ–º.'
            });
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –ø–æ–¥—É—à–∫–µ
            const monthlyExpensesValue = getNumberFromFormattedString(data.monthlyExpenses) || recommendedSavingsValue;
            recommendations.push({
                title: 'üõ°Ô∏è –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –ø–æ–¥—É—à–∫—É',
                text: `–°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –≤ —Ä–∞–∑–º–µ—Ä–µ ${formatCurrency(monthlyExpensesValue * 6)} (–≤–∞—à–∏—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤). –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –≤–∞–º –∑–∞—â–∏—Ç—É –ø—Ä–∏ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–ª–∞–Ω.`
            });
            
            // –ù–∞–ª–æ–≥–æ–≤—ã–µ –ª—å–≥–æ—Ç—ã
            recommendations.push({
                title: 'üíº –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–ª–æ–≥–æ–≤—ã–µ –ª—å–≥–æ—Ç—ã',
                text: `–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å –Ω–∞–ª–æ–≥–æ–≤—ã–º–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –ò–ò–°. –ü—Ä–∏ –≤–∞—à–∏—Ö –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è—Ö ${formatCurrency(monthlySavings)} —ç—Ç–æ –¥–∞—Å—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ ${formatCurrency(monthlySavings * 12 * 0.13)} –≤ –≥–æ–¥ –∑–∞ —Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ –≤—ã—á–µ—Ç–∞.`
            });
            
            // –ù–∞—á–∞—Ç—å —Ä–∞–Ω—å—à–µ
            recommendations.push({
                title: '‚è∞ –ù–∞—á–Ω–∏—Ç–µ —Ä–∞–Ω—å—à–µ - –ø–æ–ª—É—á–∏—Ç–µ –±–æ–ª—å—à–µ',
                text: `–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ –≤—Å–µ–≥–æ –Ω–∞ 5 –ª–µ—Ç –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –Ω–∞ ~40%. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π —Å–µ–π—á–∞—Å –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫ ${retirementAge - 3} –≥–æ–¥–∞–º.`
            });
            
            // –ò–ø–æ—Ç–µ—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
            const returnRateValue = scenarioObj.returnRate * 100;
            recommendations.push({
                title: 'üè† –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–ø–æ—Ç–µ—á–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏',
                text: `–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–ø–æ—Ç–µ–∫–∞, —Å—Ä–∞–≤–Ω–∏—Ç–µ –µ—ë —Å—Ç–∞–≤–∫—É —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π. –ü—Ä–∏ —Å—Ç–∞–≤–∫–µ –Ω–∏–∂–µ ${returnRateValue - 2}% –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–≥–æ–¥–Ω–µ–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, –∞ –Ω–µ –¥–æ—Å—Ä–æ—á–Ω–æ –ø–æ–≥–∞—à–∞—Ç—å –∫—Ä–µ–¥–∏—Ç.`
            });
            
            // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ
            const monthlyIncomeValue = getNumberFromFormattedString(data.monthlyIncome) || monthlySavings * 2;
            recommendations.push({
                title: 'üè• –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—è',
                text: `–ó–∞—â–∏—Ç–∏—Ç–µ —Å–≤–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–ª–∞–Ω —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—è. –ü—Ä–∏ –≤–∞—à–µ–º –µ–∂–µ–º–µ—Å—è—á–Ω–æ–º –¥–æ—Ö–æ–¥–µ ${formatCurrency(monthlyIncomeValue)} –∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞—Ö —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫—É —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º ${formatCurrency(monthlyIncomeValue * 60)}.`
            });
            
            // –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Ä–∏—Å–∫–∞
            recommendations.push({
                title: '‚öñÔ∏è –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ —Ä–∏—Å–∫ –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å',
                text: `–ü—Ä–∏ –≤–∞—à–µ–º –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ ${yearsToRetirement} –ª–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∞–∫—Ü–∏–π/–æ–±–ª–∏–≥–∞—Ü–∏–π —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç ${100 - age}/${age}. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–∂–∏–¥–∞–µ–º—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å ${returnRateValue}% –ø—Ä–∏ —É–º–µ—Ä–µ–Ω–Ω–æ–º —Ä–∏—Å–∫–µ.`
            });
            
            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤
            recommendations.push({
                title: 'üõí –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤',
                text: `–°–æ–∫—Ä–∞—Ç–∏–≤ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 10% (–ø—Ä–∏–º–µ—Ä–Ω–æ ${formatCurrency(monthlyExpensesValue * 0.1)}), –≤—ã —Å–º–æ–∂–µ—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏. –ó–∞ ${yearsToRetirement} –ª–µ—Ç —ç—Ç–æ –¥–∞—Å—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ ${formatCurrency(monthlyExpensesValue * 0.1 * 12 * yearsToRetirement * Math.pow(1 + scenarioObj.returnRate, yearsToRetirement/2))}.`
            });
            
            // –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–∞
            if (age > 45 || yearsToRetirement < 20) {
                recommendations.push({
                    title: 'üßì –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–∞',
                    text: `–ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Ü–µ–ª–∏ –≤ ${formatCurrency(requiredAmountValue)}, –ø–æ–¥—É–º–∞–π—Ç–µ –æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–µ –∞–∫—Ç–∏–≤–æ–≤. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ª–æ–≥–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–∞—à–∏—Ö –ø–æ–∂–µ–ª–∞–Ω–∏–π.`
                });
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            const recommendationsContainer = document.getElementById('recommendations-container');
            if (recommendations.length > 0) {
                let recommendationsHTML = '';
                
                // –í—ã–±–∏—Ä–∞–µ–º –º–∞–∫—Å–∏–º—É–º 4 —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                const displayRecommendations = recommendations.slice(0, 6);
                
                displayRecommendations.forEach(rec => {
                    recommendationsHTML += `
                        <div class="recommendation-item">
                            <span class="recommendation-title">${rec.title}</span>
                            <div class="recommendation-text">${rec.text}</div>
                        </div>
                    `;
                });
                
                recommendationsContainer.innerHTML = recommendationsHTML;
            } else {
                recommendationsContainer.innerHTML = '<div class="recommendation-item"><p>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.</p></div>';
            }
        }

        document.getElementById('scenario').addEventListener('change', function() {
            calculateFinancialPlan();
            generateRecommendations();
        });
    </script>
    <script src="js/header.js"></script>
</body>
</html> 
